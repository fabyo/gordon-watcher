# ═══════════════════════════════════════════════════════════
#  GORDON WATCHER - AIR CONFIGURATION (Hot Reload)
#  https://github.com/cosmtrek/air
#
#  Install: go install github.com/cosmtrek/air@latest
#  Run: air
# ═══════════════════════════════════════════════════════════

# Working directory
root = "."
testdata_dir = "testdata"
tmp_dir = "tmp"

# ─────────────────────────────────────────────────────────
#  BUILD CONFIGURATION
# ─────────────────────────────────────────────────────────
[build]
  # Argumentos para passar ao binário quando executar
  args_bin = []
  
  # Caminho do binário compilado (temporário)
  bin = "./tmp/gordon-watcher"
  
  # Comando de build
  cmd = "go build -o ./tmp/gordon-watcher ./cmd/watcher"
  
  # Delay antes de matar o processo antigo (ms)
  delay = 1000
  
  # Pastas a IGNORAR (não trigam rebuild)
  exclude_dir = [
    "assets",
    "tmp",
    "vendor",
    "testdata",
    "bin",
    "build",
    "data",
    "ansible",
    "docker",
    ".git",
    ".github",
    "docs",
    "coverage",
    "scripts"
  ]
  
  # Arquivos a IGNORAR
  exclude_file = []
  
  # Regex para arquivos a IGNORAR
  exclude_regex = [
    "_test\\.go$"     # Ignora arquivos de teste
  ]
  
  # Se false, builda mesmo que não tenha mudanças
  exclude_unchanged = false
  
  # Seguir symlinks?
  follow_symlink = false
  
  # Comando completo para executar (se quiser customizar mais)
  full_bin = ""
  
  # Pastas a incluir (se vazio, todas menos exclude_dir)
  include_dir = []
  
  # Extensões de arquivo que trigam rebuild
  include_ext = [
    "go",           # Código Go
    "yaml",         # Configs
    "yml",
    "toml"
  ]
  
  # Arquivos específicos que trigam rebuild
  include_file = []
  
  # Delay para matar o processo (quando travar)
  kill_delay = "0s"
  
  # Arquivo de log de erros de build
  log = "build-errors.log"
  
  # Usar polling em vez de fsnotify? (para NFS, Docker)
  poll = false
  poll_interval = 0
  
  # Re-executar o mesmo build se falhar?
  rerun = false
  rerun_delay = 500
  
  # Enviar SIGINT em vez de SIGKILL?
  send_interrupt = false
  
  # Parar de tentar buildar se der erro?
  stop_on_error = false

# ─────────────────────────────────────────────────────────
#  CORES (Output colorido no terminal)
# ─────────────────────────────────────────────────────────
[color]
  # Cor da aplicação (output do seu programa)
  app = ""
  
  # Cor das mensagens de build
  build = "yellow"
  
  # Cor das mensagens principais do Air
  main = "magenta"
  
  # Cor do runner
  runner = "green"
  
  # Cor do watcher (arquivo detectado)
  watcher = "cyan"

# ─────────────────────────────────────────────────────────
#  LOG
# ─────────────────────────────────────────────────────────
[log]
  # Mostrar apenas logs da aplicação (sem logs do Air)
  main_only = false
  
  # Mostrar timestamp nos logs?
  time = false

# ─────────────────────────────────────────────────────────
#  MISC
# ─────────────────────────────────────────────────────────
[misc]
  # Limpar arquivos temporários ao sair?
  clean_on_exit = true

# ─────────────────────────────────────────────────────────
#  SCREEN (Terminal)
# ─────────────────────────────────────────────────────────
[screen]
  # Limpar terminal a cada rebuild?
  clear_on_rebuild = true
  
  # Manter scroll (histórico)?
  keep_scroll = true