

services:
  watcher:
    environment:
      # Habilita todos os servi√ßos
      - QUEUE_ENABLED=true
      - QUEUE_TYPE=rabbitmq
      - QUEUE_URL=amqp://gordon:gordon123@rabbitmq:5672/
      - QUEUE_EXCHANGE=gordon.files
      - QUEUE_QUEUE=gordon.files.processing
      - QUEUE_ROUTING_KEY=file.new
      - QUEUE_DLQ_ENABLED=true
      - QUEUE_DLQ_EXCHANGE=gordon.files.dlq
      - QUEUE_DLQ_QUEUE=gordon.files.dead
      
      - REDIS_ENABLED=true
      - REDIS_ADDR=redis:6379
      
      - TELEMETRY_ENABLED=true
      - TELEMETRY_SERVICE_NAME=gordon-watcher
      - TELEMETRY_ENDPOINT=http://jaeger:14268/api/traces
      
      - LOG_LEVEL=info
      - LOG_FORMAT=json
      
      # Corrige o caminho dos dados
      - WATCHER_PATHS=/opt/gordon-watcher/data/incoming
      - WATCHER_WORKING_DIR=/opt/gordon-watcher/data
